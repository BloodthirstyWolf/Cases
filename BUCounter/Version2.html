<body>
    <img src="decorative-image.jpg" alt="Декоративное изображение" class="decorative-image">
    
    <!-- Первый контейнер -->
    <div class="container" id="container1">
        <div class="row">
            <span>Количество углеводов:</span>
            <input type="number" id="carbs" placeholder="Введите (г)" />
        </div>
        <div class="row">
            <span>Хлебных единиц:</span>
            <span id="breadUnits">0</span>
        </div>
        <div class="row">
            <span>Граммов продукта в 
                <span class="controls" id="decreaseBtn">&lt;</span>
                <span id="xeCount">1</span> ХЕ
                <span class="controls" id="increaseBtn">&gt;</span>:
            </span>
            <span id="gramsPerXE">0</span>
        </div>
        <div class="error" id="errorMessage"></div>
    </div>

    <!-- Второй контейнер (калькулятор ХЕ для печенья) -->
    <div class="container" id="container2" style="display: none;">
        <div class="row">
            <span>Вес упаковки (г):</span>
            <input type="number" id="packageWeight" placeholder="Введите вес упаковки" />
        </div>
        <div class="row">
            <span>Количество углеводов в упаковке (г):</span>
            <input type="number" id="carbsInPackage" placeholder="Введите углеводы в упаковке" />
        </div>
        <div class="row">
            <span>Количество печенюшек в упаковке:</span>
            <input type="number" id="cookiesCount" placeholder="Введите количество печенюшек" />
        </div>
        <div class="row">
            <span>Углеводов в 1 печенье:</span>
            <span id="carbsPerCookie">0</span>
        </div>
        <div class="row">
            <span>ХЕ в 1 печенье:</span>
            <span id="xePerCookie">0</span>
        </div>
        <div class="error" id="cookieErrorMessage"></div>
    </div>

    <!-- Навигационное меню -->
    <div class="tab-bar">
        <img class="active-svg" src="curve.svg" alt="Активная горка">
        <div class="active-circle"></div>
        <div class="tab" id="tab1">
            <img src="icon1.svg" >
        </div>
        <div class="tab" id="tab2">
            <img src="icon2.svg" >
        </div>
    </div>

    <script>
        // Контейнеры
        const container1 = document.getElementById('container1');
        const container2 = document.getElementById('container2');

        // Переключение между контейнерами
        const tabs = document.querySelectorAll('.tab');
        const activeCircle = document.querySelector('.active-circle');
        const activeSvg = document.querySelector('.active-svg');

        tabs.forEach((tab) => {
            tab.addEventListener('click', () => {
                tabs.forEach(tab => tab.classList.remove('active'));
                tab.classList.add('active');

                const tabRect = tab.getBoundingClientRect();
                const tabBarRect = tab.parentElement.getBoundingClientRect();
                const offsetLeft = tabRect.left - tabBarRect.left + tabRect.width / 2;

                activeCircle.style.left = `${offsetLeft}px`;
                activeSvg.style.left = `${offsetLeft}px`;

                // Переключаем видимость контейнеров
                if (tab.id === 'tab1') {
                    container1.style.display = 'block';
                    container2.style.display = 'none';
                } else if (tab.id === 'tab2') {
                    container1.style.display = 'none';
                    container2.style.display = 'block';
                }
            });
        });

        // Начальная настройка: показываем первый контейнер
        container1.style.display = 'block';
        container2.style.display = 'none';

        // Калькулятор ХЕ для печенья
        const packageWeightInput = document.getElementById('packageWeight');
        const carbsInPackageInput = document.getElementById('carbsInPackage');
        const cookiesCountInput = document.getElementById('cookiesCount');
        const carbsPerCookieElem = document.getElementById('carbsPerCookie');
        const xePerCookieElem = document.getElementById('xePerCookie');
        const cookieErrorMessageElem = document.getElementById('cookieErrorMessage');

        // Функция для расчета углеводов и ХЕ на 1 печенье
        function calculateCookies() {
            const packageWeight = parseFloat(packageWeightInput.value);
            const carbsInPackage = parseFloat(carbsInPackageInput.value);
            const cookiesCount = parseFloat(cookiesCountInput.value);

            if (isNaN(packageWeight) || isNaN(carbsInPackage) || isNaN(cookiesCount) || cookiesCount <= 0) {
                carbsPerCookieElem.textContent = '0';
                xePerCookieElem.textContent = '0';
                cookieErrorMessageElem.textContent = 'Пожалуйста, введите корректные данные.';
                return;
            }

            cookieErrorMessageElem.textContent = ''; // Очистка ошибки

            // Расчет углеводов на одно печенье
            const totalCarbs = (packageWeight * carbsInPackage) / 100; // Общее количество углеводов в упаковке
            const carbsPerCookie = (totalCarbs / cookiesCount).toFixed(2); // Углеводов в 1 печенье

            // Расчет ХЕ для одного печенья
            const xePerCookie = (carbsPerCookie / 12).toFixed(2); // ХЕ = углеводы / 12

            // Обновляем отображение
            carbsPerCookieElem.textContent = carbsPerCookie;
            xePerCookieElem.textContent = xePerCookie;
        }

        // Добавляем слушатели для всех полей ввода
        packageWeightInput.addEventListener('input', calculateCookies);
        carbsInPackageInput.addEventListener('input', calculateCookies);
        cookiesCountInput.addEventListener('input', calculateCookies);
    </script>
</body>
