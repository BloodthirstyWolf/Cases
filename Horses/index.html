<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Horse Game MVP</title>

  <style>
    * {
      box-sizing: border-box;
      font-family: system-ui, sans-serif;
    }

    body {
      margin: 0;
      width: 100vw;
      height: 100vh;
      background: #1e1e1e;
      color: #eaeaea;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #app {
      width: 80vw;
      max-width: 700px;
      min-height: 80vh;
      border: 1px solid #555;
      padding: 24px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 16px;
    }

    h1 {
      margin-top: 0;
    }

    button {
      background: #333;
      color: #eaeaea;
      border: 1px solid #555;
      padding: 10px 14px;
      cursor: pointer;
      font-size: 14px;
      width: 100%;
    }

    button:hover {
      background: #444;
    }

    .stalls {
      margin: 10px 0;
      width: 100%;
    }

    .stall {
      padding: 6px 0;
      opacity: 0.8;
    }

    .hint {
      opacity: 0.6;
      font-size: 13px;
      margin-top: 10px;
      text-align: center;
    }

    .footer {
      margin-top: auto;
      font-size: 12px;
      opacity: 0.6;
      text-align: center;
    }
  </style>
</head>

<body>

<div id="app"></div>

<script>
  // ===== VERSION =====
  const GAME_VERSION = "0.0.1-pre";

  // ===== APP STATE =====
  const appState = {
    screen: "menu", // "menu" | "game"
    game: null
  };

  // ===== GAME STATE FACTORY =====
  function createNewGame() {
    return {
      location: "stable",
      stalls: [null, null, null, null]
    };
  }

  // ===== NAVIGATION =====
  function startNewGame() {
    appState.game = createNewGame();
    appState.screen = "game";
    render();
  }

  function exitGame() {
    appState.screen = "menu";
    appState.game = null;
    render();
  }

  function goTo(location) {
    appState.game.location = location;
    render();
  }

  // ===== RENDER ROOT =====
  function render() {
    const app = document.getElementById("app");
    app.innerHTML = "";

    if (appState.screen === "menu") {
      renderMenu(app);
    }

    if (appState.screen === "game") {
      renderGame(app);
    }
  }

  // ===== MENU =====
  function renderMenu(root) {
    const title = document.createElement("h1");
    title.textContent = "HORSE GAME";
    root.appendChild(title);

    const newGameBtn = document.createElement("button");
    newGameBtn.textContent = "ÐÐ¾Ð²Ð°Ñ Ð¸Ð³Ñ€Ð°";
    newGameBtn.onclick = startNewGame;
    root.appendChild(newGameBtn);

    const loadBtn = document.createElement("button");
    loadBtn.textContent = "Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð¸Ð³Ñ€Ñƒ";
    loadBtn.onclick = () => alert("Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð±ÑƒÐ´ÐµÑ‚ Ð¿Ð¾Ð·Ð¶Ðµ ðŸ™‚");
    root.appendChild(loadBtn);

    const settingsBtn = document.createElement("button");
    settingsBtn.textContent = "ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸";
    settingsBtn.onclick = () => alert("ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð¿Ð¾Ð·Ð¶Ðµ");
    root.appendChild(settingsBtn);

    const exitBtn = document.createElement("button");
    exitBtn.textContent = "Ð’Ñ‹Ñ…Ð¾Ð´";
    exitBtn.onclick = () => alert("ÐŸÑ€Ð¾ÑÑ‚Ð¾ Ð·Ð°ÐºÑ€Ð¾Ð¹ Ð²ÐºÐ»Ð°Ð´ÐºÑƒ ðŸ™‚");
    root.appendChild(exitBtn);

    const footer = document.createElement("div");
    footer.className = "footer";
    footer.textContent = `v${GAME_VERSION}`;
    root.appendChild(footer);
  }

  // ===== GAME =====
  function renderGame(root) {
    if (appState.game.location === "stable") {
      renderStable(root);
    }

    if (appState.game.location === "street") {
      renderStreet(root);
    }
  }

  function renderStable(root) {
    const title = document.createElement("h1");
    title.textContent = "ÐšÐ¾Ð½ÑŽÑˆÐ½Ñ";
    root.appendChild(title);

    const stallsContainer = document.createElement("div");
    stallsContainer.className = "stalls";

    appState.game.stalls.forEach((stall, index) => {
      const div = document.createElement("div");
      div.className = "stall";
      div.textContent = stall === null
        ? `Ð¡Ñ‚Ð¾Ð¹Ð»Ð¾ ${index + 1}: Ð¿ÑƒÑÑ‚Ð¾`
        : `Ð¡Ñ‚Ð¾Ð¹Ð»Ð¾ ${index + 1}: ???`;
      stallsContainer.appendChild(div);
    });

    root.appendChild(stallsContainer);

    const btn = document.createElement("button");
    btn.textContent = "Ð’Ñ‹Ð¹Ñ‚Ð¸ Ð½Ð° ÑƒÐ»Ð¸Ñ†Ñƒ";
    btn.onclick = () => goTo("street");
    root.appendChild(btn);

    const hint = document.createElement("div");
    hint.className = "hint";
    hint.textContent = "Ð—Ð´ÐµÑÑŒ Ð±ÑƒÐ´ÑƒÑ‚ Ð¶Ð¸Ñ‚ÑŒ Ð»Ð¾ÑˆÐ°Ð´Ð¸. ÐŸÐ¾ÐºÐ° Ñ‡Ñ‚Ð¾ ÑÑ‚Ð¾Ð¹Ð»Ð° Ð¿ÑƒÑÑ‚Ñ‹Ðµ.";
    root.appendChild(hint);

    const back = document.createElement("button");
    back.textContent = "Ð’ Ð¼ÐµÐ½ÑŽ";
    back.onclick = exitGame;
    root.appendChild(back);
  }

  function renderStreet(root) {
    const title = document.createElement("h1");
    title.textContent = "Ð£Ð»Ð¸Ñ†Ð°";
    root.appendChild(title);

    const text = document.createElement("div");
    text.textContent = "Ð¢Ð¸Ñ…Ð¾. ÐŸÑƒÑÑ‚Ð¾. ÐŸÐ¾ÐºÐ° Ð·Ð´ÐµÑÑŒ Ð´ÐµÐ»Ð°Ñ‚ÑŒ Ð½ÐµÑ‡ÐµÐ³Ð¾.";
    root.appendChild(text);

    const btn = document.createElement("button");
    btn.style.marginTop = "20px";
    btn.textContent = "Ð’ÐµÑ€Ð½ÑƒÑ‚ÑŒÑÑ Ð² ÐºÐ¾Ð½ÑŽÑˆÐ½ÑŽ";
    btn.onclick = () => goTo("stable");
    root.appendChild(btn);

    const back = document.createElement("button");
    back.textContent = "Ð’ Ð¼ÐµÐ½ÑŽ";
    back.onclick = exitGame;
    root.appendChild(back);
  }

  // ===== START =====
  render();
</script>

</body>
</html>
